# Loon 配置
# Date: 2025-04-12
# By: Ding Qinzheng

[General]
# IP模式
ip-mode = dual
# DNS服务器
dns-server = system
# SNI辅助规则匹配
sni-sniffing = true
# 直连时丢弃STUN
disable-stun = false
# DNS拦截方式
dns-reject-mode = LoopbackIP
# 域名拦截行为
domain-reject-mode = DNS
# UDP回落策略
udp-fallback-mode = REJECT
# wifi共享开启时http服务的端口
wifi-access-http-port = 7222
# wifi共享开启时socks5服务的端口
wifi-access-socks5-port = 7221
# 是否允许wifi下共享网络
allow-wifi-access = false
# 网络接口
interface-mode = auto
# 节点测速时的超时秒数
test-timeout = 2
# 策略切换时关闭连接
disconnect-on-policy-change = false
# 一个节点连续失败几次后进行节点切换
switch-node-after-failure-times = 3
# 节点测试url
proxy-test-url = http://bing.com/generate_204
# 直连测试url
internet-test-url = http://wifi.vivo.com.cn/generate_204
# 资源解析器
resource-parser = https://raw.githubusercontent.com/sub-store-org/Sub-Store/release/sub-store-parser.loon.min.js
# GeoIP数据库
# ASN数据库
# 绕过代理
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local,e.crashlynatics.com
# 绕过路由
bypass-tun = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32

[Proxy]

[Remote Proxy]

[Remote Filter]
游戏节点 = NameRegex, FilterKey = "^(?=.*((?i)游戏|🎮|(\b(GAME)\b)))(?!.*((?i)回国|校园)).*$"
全球节点 = NameRegex, FilterKey = "^(?=.*(.))(?!.*((?i)群|邀请|返利|循环|官网|客服|网站|网址|获取|订阅|流量|到期|机场|下次|版本|官址|备用|过期|已用|联系|邮箱|工单|贩卖|通知|倒卖|防止|国内|地址|频道|无法|说明|使用|提示|特别|访问|支持|(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel)\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$"
香港节点 = NameRegex, FilterKey = "^(?=.*((?i)🇭🇰|香港|(\b(HK|Hong)\b)))(?!.*((?i)回国|校园|游戏|🎮|(\b(GAME)\b))).*$"
台湾节点 = NameRegex, FilterKey = "^(?=.*((?i)🇹🇼|台湾|(\b(TW|Tai|Taiwan)\b)))(?!.*((?i)回国|校园|游戏|🎮|(\b(GAME)\b))).*$"
日本节点 = NameRegex, FilterKey = "^(?=.*((?i)🇯🇵|日本|川日|东京|大阪|泉日|埼玉|(\b(JP|Japan)\b)))(?!.*((?i)回国|校园|游戏|🎮|(\b(GAME)\b))).*$"
韩国节点 = NameRegex, FilterKey = "^(?=.*((?i)🇰🇷|韩国|韓|首尔|(\b(KR|Korea)\b)))(?!.*((?i)回国|校园|游戏|🎮|(\b(GAME)\b))).*$"
新国节点 = NameRegex, FilterKey = "^(?=.*((?i)🇸🇬|新加坡|狮|(\b(SG|Singapore)\b)))(?!.*((?i)回国|校园|游戏|🎮|(\b(GAME)\b))).*$"
美国节点 = NameRegex, FilterKey = "^(?=.*((?i)🇺🇸|美国|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|(\b(US|United States)\b)))(?!.*((?i)回国|校园|游戏|🎮|(\b(GAME)\b))).*$"
英国节点 = NameRegex, FilterKey = "🇬🇧|英国|UK|伦敦|英格兰|伯明翰|泰恩河畔纽卡斯尔|利兹|爱丁堡|格拉斯哥|苏格兰"

[Proxy Group]
# 全局手动指定场景
兜底切换 = select,全部节点,香港场景,台湾场景,日本场景,韩国场景,新国场景,美国场景,英国场景,游戏场景,img-url = https://github.com/shindgewongxj/WHATSINStash/raw/main/icon/fallback.png
# 全部节点
全部节点 = url-test,teacat,八戒,acyun,魔戒,赔钱,interval = 180,tolerance = 50,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Round_Robin.png
# SSID地区场景策略
香港场景 = ssid,default=香港策略,cellular=香港策略,"PHICOMM_5G"=DIRECT,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
台湾场景 = ssid,default=台湾策略,cellular=台湾策略,"PHICOMM_5G"=DIRECT,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
日本场景 = ssid,default=日本策略,cellular=日本策略,"PHICOMM_5G"=DIRECT,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
韩国场景 = ssid,default=韩国策略,cellular=韩国策略,"PHICOMM_5G"=DIRECT,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
新国场景 = ssid,default=新国策略,cellular=新国策略,"PHICOMM_5G"=DIRECT,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
美国场景 = ssid,default=美国策略,cellular=美国策略,"PHICOMM_5G"=DIRECT,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
英国场景 = ssid,default=英国策略,cellular=英国策略,"PHICOMM_5G"=DIRECT,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
游戏场景 = ssid,default=DIRECT,cellular=DIRECT,"PHICOMM_5G"=DIRECT,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
手动场景 = ssid,default=全球手动,cellular=全球手动,"PHICOMM_5G"=DIRECT,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
# 手动选择地区策略
香港策略 = select,香港时延优选,香港故障转移,香港负载均衡,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png
台湾策略 = select,台湾时延优选,台湾故障转移,台湾负载均衡,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png
日本策略 = select,日本时延优选,日本故障转移,日本负载均衡,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
韩国策略 = select,韩国时延优选,韩国故障转移,韩国负载均衡,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/KR.png
新国策略 = select,新国时延优选,新国故障转移,新国负载均衡,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
美国策略 = select,美国时延优选,美国故障转移,美国负载均衡,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png
英国策略 = select,英国时延优选,英国故障转移,英国负载均衡,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/UK.png
# --------------------------------
# 自动
# 时延优选
香港时延优选 = url-test,香港节点,interval = 180,tolerance = 50,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png
台湾时延优选 = url-test,台湾节点,interval = 180,tolerance = 50,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png
日本时延优选 = url-test,日本节点,interval = 180,tolerance = 50,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
韩国时延优选 = url-test,韩国节点,interval = 120,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/KR.png
新国时延优选 = url-test,新国节点,interval = 180,tolerance = 50,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
美国时延优选 = url-test,美国节点,interval = 180,tolerance = 50,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png
英国时延优选 = url-test,英国节点,interval = 180,tolerance = 50,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/UK.png
# --------------------------------
# 故障转移
香港故障转移 = fallback,香港节点,interval = 120,max-timeout = 2000,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png
台湾故障转移 = fallback,台湾节点,interval = 120,max-timeout = 2000,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png
日本故障转移 = fallback,日本节点,interval = 120,max-timeout = 2000,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
韩国故障转移 = fallback,韩国节点,interval = 120,max-timeout = 2000,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/KR.png
新国故障转移 = fallback,新国节点,interval = 120,max-timeout = 2000,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
美国故障转移 = fallback,美国节点,interval = 120,max-timeout = 2000,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png
英国故障转移 = fallback,英国节点,interval = 120,max-timeout = 2000,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/UK.png
# --------------------------------
# 负载均衡
香港负载均衡 = load-balance,香港节点,interval = 120,max-timeout = 2000,algorithm = pcc,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png
台湾负载均衡 = load-balance,台湾节点,interval = 120,max-timeout = 2000,algorithm = pcc,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png
日本负载均衡 = load-balance,日本节点,interval = 120,max-timeout = 2000,algorithm = pcc,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
韩国负载均衡 = load-balance,韩国节点,interval = 120,max-timeout = 2000,algorithm = pcc,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/KR.png
新国负载均衡 = load-balance,新国节点,interval = 120,max-timeout = 2000,algorithm = pcc,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
美国负载均衡 = load-balance,美国节点,interval = 120,max-timeout = 2000,algorithm = pcc,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png
英国负载均衡 = load-balance,英国节点,interval = 120,max-timeout = 2000,algorithm = pcc,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/UK.png
# --------------------------------
# 手动策略组
全球手动 = select,全球节点,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/Static.png
# --------------------------------
# 常用平台策略选择
人工智能 = select,台湾场景,日本场景,韩国场景,新国场景,美国场景,英国场景,全球手动,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/ChatGPT.png
游戏平台 = select,DIRECT,香港场景,台湾场景,日本场景,韩国场景,新国场景,美国场景,英国场景,全球手动,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Game.png
# --------------------------------

[Rule]
# Local Rule
# Type:DOMAIN-SUFFIX,DOMAIN,DOMAIN-KEYWORD,USER-AGENT,URL-REGEX,IP-CIDR,IP-CIDR6,IP-ASN
# Strategy:DIRECT,Proxy,REJECT
# Options:no-resolve(no-resolve(only for cidr))
# IP-CIDR,192.168.0.0/16,DIRECT
# IP-CIDR,10.0.0.0/8,DIRECT
# IP-CIDR,172.16.0.0/12,DIRECT
# IP-CIDR,127.0.0.0/8,DIRECT
IP-CIDR,28.0.0.1/8,DIRECT
IP-CIDR,198.18.0.1/16,DIRECT
IP-CIDR,198.18.0.0/15,DIRECT
IP-CIDR6,fc00::/18,DIRECT
GEOIP,CN,DIRECT
FINAL,兜底切换

[Remote Rule]
https://kelee.one/Tool/Loon/Rule/AI.list, policy=人工智能, tag=AI, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/OpenAI/OpenAI.list, policy=人工智能, tag=OpenAI, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/GitHub/GitHub.list, policy=兜底切换, tag=GitHub, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/Docker/Docker.list, policy=兜底切换, tag=Docker, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/Google/Google.list, policy=兜底切换, tag=Google, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/PayPal/PayPal.list, policy=兜底切换, tag=PayPal, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/TikTok/TikTok.list, policy=兜底切换, tag=TikTok, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/Netflix/Netflix.list, policy=兜底切换, tag=Netflix, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/Spotify/Spotify.list, policy=兜底切换, tag=Spotify, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/Discord/Discord.list, policy=兜底切换, tag=Discord, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/Telegram/Telegram.list, policy=兜底切换, tag=Telegram, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/YouTube/YouTube.list, policy=兜底切换, tag=YouTube, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/Twitter/Twitter.list, policy=兜底切换, tag=Twitter, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/Facebook/Facebook.list, policy=兜底切换, tag=Facebook, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/Instagram/Instagram.list, policy=兜底切换, tag=Instagram, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/Cloudflare/Cloudflare.list, policy=兜底切换, tag=Cloudflare, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/Global/Global.list, policy=兜底切换, tag=海外服务, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/Global/Global_Domain.list, policy=兜底切换, tag=海外服务域名, enabled=true
https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Loon/Lan/Lan.list, policy=DIRECT, tag=LAN, enabled=true

[Host]
ssid:PHICOMM_5G = server:10.0.0.1

[Rewrite]

[Script]

# --------------------------------
# 插件
[Plugin]
https://kelee.one/Tool/Loon/Plugin/LoonGallery.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/Block_HTTPDNS.plugin, enabled=false
https://kelee.one/Tool/Loon/Plugin/BlockAdvertisers.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/Remove_ads_by_keli.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/Weixin_external_links_unlock.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/QQ_Redirect.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/QQMusic_remove_ads.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/Bilibili_remove_ads.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/YouTube_remove_ads.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/YouTubeSubtitlesTranslation.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/Taobao_remove_ads.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/PinDuoDuo_remove_ads.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/FleaMarket_remove_ads.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/Cainiao_remove_ads.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/MaiMai_remove_ads.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/Amap_remove_ads.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/MailMaster_remove_ads.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/BaiduNetDisk_remove_ads.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/AliYunDrive_remove_ads.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/123NetWorkDisk_remove_ads.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/XiaChuFang_remove_ads.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/Script-Hub.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/Sub-Store.plugin, enabled=true

[Mitm]
ca-p12 =
ca-passphrase =
hostname =
skip-server-cert-verify = false
